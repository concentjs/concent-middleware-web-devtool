!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@babel/runtime/helpers/esm/assertThisInitialized"),require("@babel/runtime/helpers/esm/inheritsLoose")):"function"==typeof define&&define.amd?define(["@babel/runtime/helpers/esm/assertThisInitialized","@babel/runtime/helpers/esm/inheritsLoose"],t):t(e._assertThisInitialized,e._inheritsLoose)}(this,function(r,a){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r,a=a&&a.hasOwnProperty("default")?a.default:a;var o=require("react"),i=require("react-json-tree").default,l=require("immutable").fromJS,c=require("concent").getState,s={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},d=!0,u={clear:"清除",close:"关闭",open:"开启状态调试工具"},e=module.exports={},f={position:"fixed",zIndex:9999,top:0,right:0,width:"280px",height:"100vh",backgroundColor:"#00262f",overflowY:"auto"},h={position:"fixed",top:19,right:19,zIndex:9999},p={color:"red",border:"1px solid red",marginRight:"12px"},m={color:"red",border:"1px solid red"},b={color:"#57c7de",margin:0,padding:"2px"},y=1;function S(){var t=c(),n={};return Object.keys(t).forEach(function(e){n[e]=l(t[e])}),n}var g={changeState:function(){}};e.ConcentWebDevTool=function(t){function e(){var e;return(e=t.call(this)||this).state={historyStateList:[],show:!1},e.changeState=e.changeState.bind(r(e)),e.renderHistory=e.renderHistory.bind(r(e)),g.changeState=e.changeState,e}a(e,t);var n=e.prototype;return n.componentDidMount=function(){var e=this.state.historyStateList;e.push({calledBy:"",modifiedModule:"",type:"",state:S()}),this.setState({historyStateList:e})},n.changeState=function(e){var t=e.calledBy||e.ccKey,n=e.type||"",r=e.module,a=this.state.historyStateList,o=a[a.length-1],i=e.sharedState;if(!d||i){i||(i={});var s=function(e,t,n){var r,a=e[t];a||(a=l(c(t)));var o=a;return Object.keys(n).forEach(function(e){o=a.set(e,n[e])}),Object.assign({},e,((r={})[t]=o,r))}(o?o.state:S(),r,i);a.push({calledBy:t,modifiedModule:r,type:n,state:s}),this.setState({historyStateList:a})}},n.renderHistory=function(){return this.state.historyStateList.map(function(e){return o.createElement("div",{key:++y,style:{border:"1px solid #35aa7e",margin:"5px 2px"}},o.createElement("h4",{style:b},"calledBy: ",e.calledBy),o.createElement("h4",{style:b},"type: ",e.type),o.createElement("h4",{style:b},"modifiedModule: ",e.modifiedModule),o.createElement("div",{style:{marginTop:"-12px"}},o.createElement(i,{data:e.state,theme:s,invertTheme:!1,shouldExpandNode:!1})))})},n.render=function(){var e=this;return this.state.show?o.createElement("div",{style:f},o.createElement("button",{style:p,onClick:function(){return e.setState({historyStateList:[]})}},u.clear),o.createElement("button",{style:m,onClick:function(){return e.setState({show:!1})}},u.close),this.renderHistory()):o.createElement("button",{style:h,onClick:function(){return e.setState({show:!0})}},u.open)},e}(o.Component),e.concentWebDevToolMiddleWare=function(e,t){g.changeState(e),t()},e.setConf=function(e,t){t&&null!=t.ignoreEmptyModuleState&&(d=t.ignoreEmptyModuleState),e&&(null!=e.clear&&(u.clear=e.clear),null!=e.close&&(u.close=e.close),null!=e.open&&(u.clear=e.open))}});

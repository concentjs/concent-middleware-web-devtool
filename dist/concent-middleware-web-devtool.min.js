!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@babel/runtime/helpers/esm/assertThisInitialized"),require("@babel/runtime/helpers/esm/inheritsLoose")):"function"==typeof define&&define.amd?define(["@babel/runtime/helpers/esm/assertThisInitialized","@babel/runtime/helpers/esm/inheritsLoose"],t):t(e._assertThisInitialized,e._inheritsLoose)}(this,function(n,i){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var r=require("react"),s=require("react-json-tree").default,o=require("immutable").fromJS,c=require("concent").getState,l={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},e=module.exports={},d={position:"fixed",zIndex:9999,top:0,right:0,width:"280px",height:"100vh",backgroundColor:"#00262f",overflowY:"auto"},u={position:"fixed",top:19,right:19,zIndex:9999},h={color:"#57c7de",margin:0,padding:"2px"},f=1;function m(){var t=c(),a={};return Object.keys(t).forEach(function(e){a[e]=o(t[e])}),a}var b={changeState:function(){}};e.ConcentWebDevTool=function(t){function e(){var e;return(e=t.call(this)||this).state={historyStateList:[],show:!1},e.changeState=e.changeState.bind(n(e)),e.renderHistory=e.renderHistory.bind(n(e)),b.changeState=e.changeState,e}i(e,t);var a=e.prototype;return a.componentDidMount=function(){var e=this.state.historyStateList;e.push({calledBy:"",modifiedModule:"",type:"",state:m()}),this.setState({historyStateList:e})},a.changeState=function(e){var t=e.calledBy||e.ccKey,a=e.type||"",n=e.module,i=this.state.historyStateList,r=i[i.length-1],s=function(e,t,a){var n,i=e[t];i||(i=o(c(t)));var r=i;return Object.keys(a).forEach(function(e){r=i.set(e,a[e])}),Object.assign({},e,((n={})[t]=r,n))}(r?r.state:m(),n,e.state);i.push({calledBy:t,modifiedModule:n,type:a,state:s}),this.setState({historyStateList:i})},a.renderHistory=function(){return this.state.historyStateList.map(function(e){return r.createElement("div",{key:++f,style:{border:"1px solid #35aa7e",margin:"5px 2px"}},r.createElement("h4",{style:h},"calledBy: ",e.calledBy),r.createElement("h4",{style:h},"type: ",e.type),r.createElement("h4",{style:h},"modifiedModule: ",e.modifiedModule),r.createElement("div",{style:{marginTop:"-12px"}},r.createElement(s,{data:e.state,theme:l,invertTheme:!1,shouldExpandNode:!1})))})},a.render=function(){var e=this;return this.state.show?r.createElement("div",{style:d},r.createElement("button",{onClick:function(){return e.setState({historyStateList:[]})}},"清除"),r.createElement("button",{onClick:function(){return e.setState({show:!1})}},"关闭"),this.renderHistory()):r.createElement("button",{style:u,onClick:function(){return e.setState({show:!0})}},"开启状态调试工具")},e}(r.Component),e.concentWebDevToolMiddleware=function(e,t){b.changeState(e),t()}});

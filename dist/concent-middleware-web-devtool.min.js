!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@babel/runtime/helpers/esm/assertThisInitialized"),require("@babel/runtime/helpers/esm/inheritsLoose")):"function"==typeof define&&define.amd?define(["@babel/runtime/helpers/esm/assertThisInitialized","@babel/runtime/helpers/esm/inheritsLoose"],t):t(e._assertThisInitialized,e._inheritsLoose)}(this,function(a,i){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a,i=i&&i.hasOwnProperty("default")?i.default:i;var r=require("react"),s=require("react-json-tree").default,o=require("immutable").fromJS,c=require("concent").getState,l={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},e=module.exports={},u={position:"fixed",zIndex:9999,top:0,right:0,width:"280px",height:"100vh",backgroundColor:"#00262f",overflowY:"auto"},d={position:"fixed",top:19,right:19,zIndex:9999},f={color:"#57c7de",margin:0,padding:"2px"},h=1;function m(){var t=c(),n={};return Object.keys(t).forEach(function(e){n[e]=o(t[e])}),n}var b={changeState:function(){}};e.ConcentWebDevTool=function(t){function e(){var e;return(e=t.call(this)||this).state={historyStateList:[],show:!1},e.changeState=e.changeState.bind(a(e)),e.renderHistory=e.renderHistory.bind(a(e)),b.changeState=e.changeState,e}i(e,t);var n=e.prototype;return n.componentDidMount=function(){var e=this.state.historyStateList;e.push({calledBy:"",modifiedModule:"",type:"",state:m()}),this.setState({historyStateList:e})},n.changeState=function(e){var t=e.calledBy||e.ccKey,n=e.type||"",a=e.module,i=this.state.historyStateList,r=i[i.length-1],s=function(e,t,n){var a,i=e[t];i||(i=o(c(t)));var r=i;return Object.keys(n).forEach(function(e){r=i.set(e,n[e])}),Object.assign({},e,((a={})[t]=r,a))}(r?r.state:m(),a,e.state);i.push({calledBy:t,modifiedModule:a,type:n,state:s}),this.setState({historyStateList:i})},n.renderHistory=function(){function t(e,t,n){return!1}return this.state.historyStateList.map(function(e){return r.createElement("div",{key:++h,style:{border:"1px solid #35aa7e",margin:"5px 2px"}},r.createElement("h4",{style:f},"calledBy: ",e.calledBy),r.createElement("h4",{style:f},"type: ",e.type),r.createElement("h4",{style:f},"modifiedModule: ",e.modifiedModule),r.createElement("div",{style:{marginTop:"-12px"}},r.createElement(s,{data:e.state,theme:l,invertTheme:!1,shouldExpandNode:t})))})},n.render=function(){var e=this;return this.state.show?r.createElement("div",{style:u},r.createElement("button",{onClick:function(){return e.setState({historyStateList:[]})}},"清除"),r.createElement("button",{onClick:function(){return e.setState({show:!1})}},"关闭"),this.renderHistory()):r.createElement("button",{style:d,onClick:function(){return e.setState({show:!0})}},"开启状态调试工具")},e}(r.Component),e.concentWebDevToolMiddleware=function(e,t){b.changeState(e),t()}});

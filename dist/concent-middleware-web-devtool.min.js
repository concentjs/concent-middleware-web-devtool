!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@babel/runtime/helpers/esm/assertThisInitialized"),require("@babel/runtime/helpers/esm/inheritsLoose")):"function"==typeof define&&define.amd?define(["@babel/runtime/helpers/esm/assertThisInitialized","@babel/runtime/helpers/esm/inheritsLoose"],t):t(e._assertThisInitialized,e._inheritsLoose)}(this,function(a,r){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a,r=r&&r.hasOwnProperty("default")?r.default:r;var o=require("react"),i=require("react-json-tree").default,l=require("immutable").fromJS,c=require("concent").getState,s={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},u=!0,d={clear:"清除",close:"关闭",open:"开启状态调试工具"},e=module.exports={},f={position:"fixed",zIndex:9999,top:0,right:0,width:"280px",height:"100vh",backgroundColor:"#00262f",overflowY:"auto"},h={position:"fixed",top:19,right:19,fontWeight:400,zIndex:9999},p={color:"blue",fontWeight:400,border:"1px solid blue",padding:"0 6px",backgroundColor:"silver"},b=Object.assign({},p,{margin:"0 12px"}),m={color:"#57c7de",margin:0,padding:"2px"},y=1;function g(){var t=c(),n={};return Object.keys(t).forEach(function(e){n[e]=l(t[e])}),n}var S={changeState:function(){}};e.ConcentWebDevTool=function(t){function e(){var e;return(e=t.call(this)||this).state={historyStateList:[],show:!1},e.changeState=e.changeState.bind(a(e)),e.renderHistory=e.renderHistory.bind(a(e)),S.changeState=e.changeState,e}r(e,t);var n=e.prototype;return n.componentDidMount=function(){var e=this.state.historyStateList;e.push({calledBy:"",modifiedModule:"",type:"",state:g()}),this.setState({historyStateList:e})},n.changeState=function(e){var t=e.calledBy||e.ccKey,n=e.type||"",a=e.module,r=this.state.historyStateList,o=r[r.length-1],i=e.sharedState;if(!u||i){i||(i={});var s=function(e,t,n){var a,r=e[t];r||(r=l(c(t)));var o=r;return Object.keys(n).forEach(function(e){o=r.set(e,n[e])}),Object.assign({},e,((a={})[t]=o,a))}(o?o.state:g(),a,i);r.push({calledBy:t,modifiedModule:a,type:n,state:s}),this.setState({historyStateList:r})}},n.renderHistory=function(){return this.state.historyStateList.map(function(e){return o.createElement("div",{key:++y,style:{border:"1px solid #35aa7e",margin:"5px 2px"}},o.createElement("h4",{style:m},"calledBy: ",e.calledBy),o.createElement("h4",{style:m},"type: ",e.type),o.createElement("h4",{style:m},"modifiedModule: ",e.modifiedModule),o.createElement("div",{style:{marginTop:"-12px"}},o.createElement(i,{data:e.state,theme:s,invertTheme:!1,shouldExpandNode:!1})))})},n.render=function(){var e=this;return this.state.show?o.createElement("div",{style:f},o.createElement("button",{style:b,onClick:function(){return e.setState({historyStateList:[]})}},d.clear),o.createElement("button",{style:p,onClick:function(){return e.setState({show:!1})}},d.close),this.renderHistory()):o.createElement("button",{style:h,onClick:function(){return e.setState({show:!0})}},d.open)},e}(o.Component),e.concentWebDevToolMiddleWare=function(e,t){S.changeState(e),t()},e.setConf=function(e,t){t&&null!=t.ignoreEmptyModuleState&&(u=t.ignoreEmptyModuleState),e&&(null!=e.clear&&(d.clear=e.clear),null!=e.close&&(d.close=e.close),null!=e.open&&(d.open=e.open))}});
